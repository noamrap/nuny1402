<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¢×¨×›×ª ×ª×¨×’×•×œ ××ª××˜×™×§×” - ×™×¢×œ ×¨×¤×•×¤×•×¨×˜</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #34495e;
            --accent: #3498db;
            --light: #ecf0f1;
            --success: #27ae60;
            --error: #c0392b;
            --border: #bdc3c7;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f6fa;
            color: var(--primary);
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* ×¡×¨×’×œ ×¦×“ ×•× ×™×•×•×˜ */
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 { margin: 0; font-size: 1.5rem; }
        
        .nav-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            background: white;
            padding: 10px;
            border-bottom: 1px solid var(--border);
        }

        .nav-btn {
            background: none;
            border: 1px solid var(--border);
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            color: var(--secondary);
            transition: 0.2s;
            border-radius: 4px;
        }

        .nav-btn:hover { background: var(--light); }
        .nav-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* ××–×•×¨ ×ª×•×›×Ÿ */
        main {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            width: 90%;
            flex-grow: 1;
        }

        /* ××™×–×•×¨ ×”×¡×‘×¨ ×œ×™××•×“×™ */
        .study-panel {
            background: #f8f9fa;
            border-right: 4px solid var(--accent);
            padding: 20px;
            margin-bottom: 30px;
        }

        .formula-box {
            font-family: 'Courier New', Courier, monospace;
            background: #e8e8e8;
            padding: 10px;
            margin: 10px 0;
            font-weight: bold;
            direction: ltr;
            text-align: center;
            font-size: 1.2em;
        }

        /* ××™×–×•×¨ ×”×©××œ×•×ª */
        .progress-indicator {
            text-align: left;
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .question-box {
            font-size: 1.2em;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .option-btn {
            padding: 15px;
            border: 2px solid var(--border);
            background: white;
            font-size: 1.1em;
            cursor: pointer;
            border-radius: 6px;
            transition: 0.2s;
        }

        .option-btn:hover:not([disabled]) {
            border-color: var(--accent);
            background: #f0f8ff;
        }

        .option-btn.correct {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }

        .option-btn.wrong {
            background-color: var(--error);
            color: white;
            border-color: var(--error);
            opacity: 0.6;
        }

        /* ×”×¡×‘×¨ ×¤×ª×¨×•×Ÿ */
        .solution-panel {
            margin-top: 20px;
            padding: 15px;
            background: #eaffea;
            border: 1px solid #b2d8b2;
            border-radius: 6px;
            display: none;
        }
        
        .solution-panel.visible { display: block; }
        
        .next-btn {
            display: none;
            margin-top: 20px;
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            font-size: 1.1em;
            cursor: pointer;
            border-radius: 4px;
        }

        /* ×¢×–×¨×™× ×•×™×–×•××œ×™×™× */
        .visual-aid {
            text-align: center;
            margin: 20px 0;
        }
        
        svg { max-width: 100%; height: auto; }

    </style>
</head>
<body>

<header>
    <h1>××¢×¨×›×ª ×œ××™×“×” - ×™×¢×œ ×¨×¤×•×¤×•×¨×˜</h1>
    <div id="total-score">×¦×™×•×Ÿ ××¦×˜×‘×¨: 0</div>
</header>

<div class="nav-container">
    <button class="nav-btn active" onclick="setTopic('pythagoras')">××©×¤×˜ ×¤×™×ª×’×•×¨×¡</button>
    <button class="nav-btn" onclick="setTopic('trig')">×˜×¨×™×’×•× ×•××˜×¨×™×” (Sin/Cos/Tan)</button>
    <button class="nav-btn" onclick="setTopic('shift')">××¦×™××ª ×–×•×•×™×ª (Shift)</button>
    <button class="nav-btn" onclick="setTopic('stats')">×¡×˜×˜×™×¡×˜×™×§×”</button>
</div>

<main>
    <div id="explanation-area" class="study-panel"></div>

    <div id="practice-area">
        <div class="progress-indicator">×©××œ×” <span id="q-current">1</span> ××ª×•×š <span id="q-total">30</span></div>
        
        <div class="visual-aid" id="question-visual"></div>
        <div class="question-box" id="question-text"></div>
        
        <div class="options-grid" id="options-container"></div>

        <div class="solution-panel" id="solution-text"></div>
        <button class="next-btn" id="next-button" onclick="nextQuestion()">×œ×©××œ×” ×”×‘××”</button>
    </div>
</main>

<script>
    // --- ×”×’×“×¨×•×ª ××¢×¨×›×ª ---
    const TOTAL_QUESTIONS = 30;
    let currentTopic = 'pythagoras';
    let currentQuestionIndex = 1;
    let score = 0;
    let currentQuestionData = null;

    // --- ×ª×•×›×Ÿ ×œ×™××•×“×™ (×”×¡×‘×¨×™×) ---
    const studyContent = {
        pythagoras: `
            <h3>××©×¤×˜ ×¤×™×ª×’×•×¨×¡ - ×¡×™×›×•×</h3>
            <p>×‘××©×•×œ×© ×™×©×¨ ×–×•×•×™×ª, ×¡×›×•× ×©×˜×—×™ ×”×¨×™×‘×•×¢×™× ×”×‘× ×•×™×™× ×¢×œ ×”× ×™×¦×‘×™× ×©×•×•×” ×œ×©×˜×— ×”×¨×™×‘×•×¢ ×”×‘× ×•×™ ×¢×œ ×”×™×ª×¨.</p>
            <div class="formula-box">aÂ² + bÂ² = cÂ²</div>
            <p><strong>×˜×™×¤ ×œ×¤×ª×¨×•×Ÿ:</strong><br>
            1. ×× ××—×¤×©×™× ××ª ×”×™×ª×¨ (×”×¦×œ×¢ ×”××¨×•×›×” ××•×œ ×”-90Â°): ×¢×•×©×™× <strong>×—×™×‘×•×¨</strong> (+) ×‘×ª×•×š ×”×©×•×¨×©.<br>
            2. ×× ××—×¤×©×™× × ×™×¦×‘ (××—×ª ×”×¦×œ×¢×•×ª ×”×§×¦×¨×•×ª): ×¢×•×©×™× <strong>×—×™×¡×•×¨</strong> (-) ×‘×ª×•×š ×”×©×•×¨×© (×”×™×ª×¨ ×¤×—×•×ª ×”× ×™×¦×‘ ×”×™×“×•×¢).</p>
        `,
        trig: `
            <h3>×¤×•× ×§×¦×™×•×ª ×˜×¨×™×’×•× ×•××˜×¨×™×•×ª</h3>
            <p>×”×§×©×¨ ×‘×™×Ÿ ×”×–×•×•×™×•×ª ×œ×¦×œ×¢×•×ª ×‘××©×•×œ×© ×™×©×¨ ×–×•×•×™×ª.</p>
            <div class="formula-box">
                Sin(Î±) = ××•×œ / ×™×ª×¨<br>
                Cos(Î±) = ×œ×™×“ / ×™×ª×¨<br>
                Tan(Î±) = ××•×œ / ×œ×™×“
            </div>
            <p>×–×•×›×¨×™× ×œ×¤×™: <strong>SOH CAH TOA</strong>.</p>
        `,
        shift: `
            <h3>××¦×™××ª ×–×•×•×™×ª (Shift)</h3>
            <p>×›××©×¨ ×™×“×•×¢×•×ª ×œ× ×• ×©×ª×™ ×¦×œ×¢×•×ª ×•×× ×• ×¨×•×¦×™× ×œ××¦×•× ××ª ×’×•×“×œ ×”×–×•×•×™×ª, × ×©×ª××© ×‘×¤×¢×•×œ×” ×”×”×¤×•×›×” ×‘××—×©×‘×•×Ÿ.</p>
            <div class="formula-box">Shift + Sin/Cos/Tan</div>
            <p>×œ×“×•×’××”: ×× sin(x) = 0.5, ××– x = sinâ»Â¹(0.5) = 30Â°.</p>
        `,
        stats: `
            <h3>×¡×˜×˜×™×¡×˜×™×§×”: ××“×“×™ ××¨×›×–</h3>
            <p><strong>×××•×¦×¢:</strong> ××—×‘×¨×™× ××ª ×›×œ ×”××¡×¤×¨×™× ×•××—×œ×§×™× ×‘×›××•×ª ×”××¡×¤×¨×™× ×©×™×©.</p>
            <div class="formula-box">×××•×¦×¢ = ×¡×›×•× / ×›××•×ª</div>
            <p><strong>×—×¦×™×•×Ÿ:</strong> ×”××¡×¤×¨ ×©× ××¦× ×‘×“×™×•×§ ×‘×××¦×¢, <u>××—×¨×™ ×©××¡×“×¨×™× ××ª ×”××¡×¤×¨×™× ××”×§×˜×Ÿ ×œ×’×“×•×œ</u>. ×× ×™×© ××¡×¤×¨ ×–×•×’×™ ×©×œ ××™×‘×¨×™×, ×¢×•×©×™× ×××•×¦×¢ ×‘×™×Ÿ ×”×©× ×™×™× ×”×××¦×¢×™×™×.</p>
        `
    };

    // --- ××—×•×œ×œ ×ª×¨×’×™×œ×™× (Logic Generator) ---
    function generateQuestion(topic) {
        // ×¤×•× ×§×¦×™×™×ª ×¢×–×¨ ×œ××¡×¤×¨ ×¨× ×“×•××œ×™
        const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        
        let q = { text: '', correct: '', options: [], explanation: '', visual: '' };

        if (topic === 'pythagoras') {
            const type = Math.random() > 0.5 ? 'hypotenuse' : 'leg';
            const a = rand(3, 12);
            const b = rand(3, 12);
            
            // ×™×¦×™×¨×ª SVG ×“×™× ××™
            q.visual = `
                <svg width="200" height="150" viewBox="-10 -10 220 170">
                    <polygon points="0,150 200,150 0,0" fill="none" stroke="black" stroke-width="2"/>
                    <rect x="0" y="140" width="10" height="10" fill="none" stroke="black"/>
                    <text x="10" y="80" font-size="16">${type === 'leg' ? '?' : a}</text>
                    <text x="90" y="170" font-size="16">${type === 'leg' ? b : b}</text>
                    <text x="110" y="80" font-size="16">${type === 'hypotenuse' ? '?' : Math.floor(Math.sqrt(a*a + b*b))}</text>
                </svg>
            `;

            if (type === 'hypotenuse') {
                const c_val = Math.sqrt(a*a + b*b).toFixed(2);
                q.text = `× ×ª×•× ×™× ×”× ×™×¦×‘×™×: ${a} ×•-${b}. ×—×©×‘×™ ××ª ××•×¨×š ×”×™×ª×¨.`;
                q.correct = c_val;
                q.explanation = `× ×•×¡×—×”: aÂ² + bÂ² = cÂ².<br>×—×™×©×•×‘: ${a}Â² + ${b}Â² = ${a*a} + ${b*b} = ${a*a+b*b}.<br>×©×•×¨×© ×©×œ ${a*a+b*b} ×”×•× ${c_val}.`;
            } else {
                // Find Leg (×× ×—× ×• × ×‘× ×” ××©×•×œ×© ×ª×§×™×Ÿ)
                const leg1 = rand(5, 15);
                const hypotenuse = rand(leg1 + 2, leg1 + 10); // ×™×ª×¨ ×—×™×™×‘ ×œ×”×™×•×ª ×’×“×•×œ ×× ×™×¦×‘
                const leg2_calc = Math.sqrt(hypotenuse**2 - leg1**2).toFixed(2);
                
                q.visual = `<svg width="150" height="150"><polygon points="0,100 100,100 0,0" fill="none" stroke="black" stroke-width="2"/><text x="50" y="50">c=${hypotenuse}</text><text x="50" y="120">b=${leg1}</text><text x="-20" y="50">a=?</text></svg>`; // Simplified visual update
                q.text = `× ×ª×•×Ÿ ×™×ª×¨ ×‘××•×¨×š ${hypotenuse} ×•× ×™×¦×‘ ×‘××•×¨×š ${leg1}. ×—×©×‘×™ ××ª ×”× ×™×¦×‘ ×”×©× ×™.`;
                q.correct = leg2_calc;
                q.explanation = `× ×•×¡×—×” ×œ× ×™×¦×‘: cÂ² - bÂ² = aÂ² (×—×™×¡×•×¨!).<br>×—×™×©×•×‘: ${hypotenuse}Â² - ${leg1}Â² = ${hypotenuse**2} - ${leg1**2} = ${hypotenuse**2 - leg1**2}.<br>×©×•×¨×© ×”×ª×•×¦××” ×”×•× ${leg2_calc}.`;
            }
        } 
        
        else if (topic === 'trig') {
            const func = ['Sin', 'Cos', 'Tan'][rand(0, 2)];
            const angle = rand(20, 70);
            
            q.visual = `<div style="font-size:3em;">Try: ${func}(${angle})</div>`;

            if (Math.random() > 0.5) {
                // ×—×™×©×•×‘ ×¢×¨×š ×¤×©×•×˜ ×‘××—×©×‘×•×Ÿ
                let val;
                if(func === 'Sin') val = Math.sin(angle * Math.PI / 180);
                if(func === 'Cos') val = Math.cos(angle * Math.PI / 180);
                if(func === 'Tan') val = Math.tan(angle * Math.PI / 180);
                val = val.toFixed(3);

                q.text = `××”×™ ×”×ª×•×¦××” ×©×œ ${func}(${angle}Â°)? (×”×™×¢×–×¨×™ ×‘××—×©×‘×•×Ÿ)`;
                q.correct = val;
                q.explanation = `×‘××—×©×‘×•×Ÿ ×œ×•×—×¦×™×: ${func} -> ${angle} -> =. ×”×ª×•×¦××” ×”×™× ${val}.`;
            } else {
                // ××¦×™××ª ×¦×œ×¢
                const side = rand(10, 30);
                let ans;
                // Scenario: Find Opposite given Hypotenuse (Sin)
                q.text = `×‘××©×•×œ×© ×™×©×¨ ×–×•×•×™×ª, ×”×–×•×•×™×ª ×”×™× ${angle}Â°. ×”×™×ª×¨ ×”×•× ${side}. ××” ××•×¨×š ×”× ×™×¦×‘ ×©××•×œ ×”×–×•×•×™×ª?`;
                const calc = (Math.sin(angle * Math.PI / 180) * side).toFixed(2);
                q.correct = calc;
                q.explanation = `×™×© ×œ× ×• ×–×•×•×™×ª ×•×™×ª×¨, ××—×¤×©×™× '××•×œ'. ×”× ×•×¡×—×” ×”×™× Sin.<br>Sin(${angle}) = X / ${side}.<br>X = ${side} * Sin(${angle}) = ${calc}.`;
            }
        }

        else if (topic === 'shift') {
            const type = rand(1, 3); // 1=sin, 2=cos, 3=tan
            let val, angleReal;
            
            // ××™×™×¦×¨×™× ×–×•×•×™×ª ×™×¤×”
            angleReal = rand(10, 80);
            
            if (type === 1) { // Sin
                val = Math.sin(angleReal * Math.PI / 180).toFixed(3);
                q.text = `× ×ª×•×Ÿ ×©- Sin(x) = ${val}. ××” ×’×•×“×œ ×”×–×•×•×™×ª x?`;
                q.explanation = `×‘××—×©×‘×•×Ÿ: Shift -> Sin -> ${val}. ××§×‘×œ×™× ${angleReal} ××¢×œ×•×ª.`;
            } else if (type === 2) { // Cos
                val = Math.cos(angleReal * Math.PI / 180).toFixed(3);
                q.text = `× ×ª×•×Ÿ ×©- Cos(x) = ${val}. ××” ×’×•×“×œ ×”×–×•×•×™×ª x?`;
                q.explanation = `×‘××—×©×‘×•×Ÿ: Shift -> Cos -> ${val}. ××§×‘×œ×™× ${angleReal} ××¢×œ×•×ª.`;
            } else { // Tan
                val = Math.tan(angleReal * Math.PI / 180).toFixed(3);
                q.text = `× ×ª×•×Ÿ ×©- Tan(x) = ${val}. ××” ×’×•×“×œ ×”×–×•×•×™×ª x?`;
                q.explanation = `×‘××—×©×‘×•×Ÿ: Shift -> Tan -> ${val}. ××§×‘×œ×™× ${angleReal} ××¢×œ×•×ª.`;
            }
            q.correct = angleReal + "Â°";
            q.visual = `<div style="font-size:2em;">? = ${val}</div>`;
        }

        else if (topic === 'stats') {
            // ×™×¦×™×¨×ª ×¡×“×¨×ª ××¡×¤×¨×™×
            const length = rand(3, 7); // ××•×¨×š ×¡×“×¨×” 3 ×¢×“ 7
            let nums = [];
            for(let i=0; i<length; i++) nums.push(rand(1, 20));
            
            const askMean = Math.random() > 0.5;
            const sortedNums = [...nums].sort((a,b) => a-b);
            
            q.visual = `<div style="font-size:1.5em; letter-spacing: 3px;">${nums.join(', ')}</div>`;

            if (askMean) {
                const sum = nums.reduce((a,b) => a+b, 0);
                const mean = (sum / length).toFixed(1); // ××¢×’×œ ×œ××§×•× ××—×“
                
                // ×•×•×“× ×©×”×ª×©×•×‘×” ×”×™× ××¡×¤×¨ ×¢×’×•×œ ××• ×—×¦×™ ×›×“×™ ×©×™×”×™×” ×§×œ, ×× ×œ× - ×ª×§×Ÿ
                // (×›××Ÿ ×œ×¦×•×¨×š ×”×¤×©×˜×•×ª × ×©××™×¨ ×¢× × ×§×•×“×” ×¢×©×¨×•× ×™×ª, ××‘×œ × ×¡×‘×™×¨)
                
                q.text = `×—×©×‘×™ ××ª ×”×××•×¦×¢ ×©×œ ×”××¡×¤×¨×™×: ${nums.join(', ')}`;
                q.correct = mean;
                q.explanation = `××—×‘×¨×™× ××ª ×”×›×œ: ${nums.join('+')} = ${sum}.<br>××—×œ×§×™× ×‘×›××•×ª ×”××™×‘×¨×™× (${length}).<br>${sum} / ${length} = ${mean}.`;
            } else {
                // Median
                q.text = `××¦××™ ××ª ×”×—×¦×™×•×Ÿ ×©×œ ×”×¡×“×¨×”: ${nums.join(', ')}`;
                
                let median;
                if (length % 2 !== 0) {
                    median = sortedNums[Math.floor(length / 2)];
                    q.explanation = `×§×•×“× ××¡×“×¨×™×: ${sortedNums.join(', ')}.<br>×”××¡×¤×¨ ×”×××¦×¢×™ ×”×•× ${median}.`;
                } else {
                    const mid1 = sortedNums[length/2 - 1];
                    const mid2 = sortedNums[length/2];
                    median = ((mid1 + mid2) / 2).toString(); // remove decimal if whole
                    q.explanation = `×§×•×“× ××¡×“×¨×™×: ${sortedNums.join(', ')}.<br>×™×© ×›××•×ª ×–×•×’×™×ª, ××– ×œ×•×§×—×™× ××ª ×©× ×™ ×”×××¦×¢×™×™× (${mid1}, ${mid2}) ×•×¢×•×©×™× ×œ×”× ×××•×¦×¢: ${median}.`;
                }
                q.correct = median.toString();
            }
        }

        // ×™×¦×™×¨×ª ××¡×™×—×™× (Distractors)
        q.options = generateOptions(q.correct);
        return q;
    }

    // ×™×¦×™×¨×ª ×ª×©×•×‘×•×ª ×œ× × ×›×•× ×•×ª ×—×›××•×ª
    function generateOptions(correctAnswer) {
        let options = new Set();
        options.add(correctAnswer.toString());
        
        let correctNum = parseFloat(correctAnswer);
        
        while (options.size < 4) {
            let fake;
            if (isNaN(correctNum)) { 
                // ×× ×”×ª×©×•×‘×” ×”×™× ×˜×§×¡×˜ (×œ××©×œ ×¢× ××¢×œ×•×ª), ×¡×ª× × ×™×¦×•×¨ ××¡×¤×¨×™× ×§×¨×•×‘×™×
                let cleanNum = parseFloat(correctAnswer.replace('Â°',''));
                fake = (cleanNum + Math.floor(Math.random() * 20) - 10) + "Â°";
            } else {
                // ×™×¦×™×¨×ª ×©×’×™××•×ª ××•×¤×™×™× ×™×•×ª
                const offset = (Math.random() * 10 - 5).toFixed(2); // ×¤×œ×•×¡ ××™× ×•×¡ ×§×¦×ª
                fake = (correctNum + parseFloat(offset)).toFixed(correctAnswer.toString().includes('.') ? 2 : 0);
                
                // ×œ×¢×™×ª×™× × ×™×¦×•×¨ ×©×’×™××ª ×›×¤×œ ×‘-2 ××• ×—×œ×•×§×” ×‘-2
                if (Math.random() > 0.8) fake = (correctNum * 2).toFixed(1);
                if (Math.random() > 0.9) fake = (correctNum / 2).toFixed(1);
            }
            
            if (fake !== correctAnswer && parseFloat(fake) > 0) {
                options.add(fake.toString());
            }
        }
        
        // ×”××¨×ª Set ×œ××¢×¨×š ×•×¢×¨×‘×•×‘
        return Array.from(options).sort(() => Math.random() - 0.5);
    }

    // --- ×œ×•×’×™×§×” ×©×œ ×××©×§ ×”××©×ª××© ---

    function setTopic(topic) {
        currentTopic = topic;
        currentQuestionIndex = 1;
        
        // ×¢×“×›×•×Ÿ ×›×¤×ª×•×¨×™ × ×™×•×•×˜
        document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active'); // ×–×” ×™×¢×‘×•×“ ×¨×§ ×‘×œ×—×™×¦×”, ×‘××ª×—×•×œ ×–×” ×œ× ×§×¨×™×˜×™
        
        // ×¢×“×›×•×Ÿ ×ª×•×›×Ÿ
        document.getElementById('explanation-area').innerHTML = studyContent[topic];
        nextQuestion();
    }

    function nextQuestion() {
        if (currentQuestionIndex > TOTAL_QUESTIONS) {
            finishPractice();
            return;
        }

        // ××™×¤×•×¡ ×××©×§
        document.getElementById('solution-text').classList.remove('visible');
        document.getElementById('next-button').style.display = 'none';
        
        // ×¢×“×›×•×Ÿ ××•× ×™×
        document.getElementById('q-current').textContent = currentQuestionIndex;
        document.getElementById('q-total').textContent = TOTAL_QUESTIONS;

        // ×™×¦×™×¨×ª ×©××œ×” ×—×“×©×”
        currentQuestionData = generateQuestion(currentTopic);
        
        // ×¨× ×“×•×¨ ×œ××¡×š
        document.getElementById('question-text').innerHTML = currentQuestionData.text;
        document.getElementById('question-visual').innerHTML = currentQuestionData.visual;
        
        const optsContainer = document.getElementById('options-container');
        optsContainer.innerHTML = '';
        
        currentQuestionData.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.textContent = opt;
            btn.onclick = () => checkAnswer(opt, btn);
            optsContainer.appendChild(btn);
        });
    }

    function checkAnswer(selectedVal, btnElem) {
        // ×× ×™×¢×ª ×œ×—×™×¦×” ×›×¤×•×œ×”
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(b => b.disabled = true);

        const isCorrect = selectedVal === currentQuestionData.correct;
        
        if (isCorrect) {
            btnElem.classList.add('correct');
            score += 10;
            document.getElementById('total-score').textContent = `×¦×™×•×Ÿ ××¦×˜×‘×¨: ${score}`;
        } else {
            btnElem.classList.add('wrong');
            // ×¡×™××•×Ÿ ×”×ª×©×•×‘×” ×”× ×›×•× ×”
            allBtns.forEach(b => {
                if (b.textContent === currentQuestionData.correct) {
                    b.classList.add('correct');
                }
            });
        }

        // ×”×¦×’×ª ×¤×ª×¨×•×Ÿ
        const solDiv = document.getElementById('solution-text');
        solDiv.innerHTML = `<strong>${isCorrect ? '× ×›×•×Ÿ ×××•×“!' : '×˜×¢×•×ª, ×”× ×” ×”×“×¨×š:'}</strong><br>` + currentQuestionData.explanation;
        solDiv.classList.add('visible');

        // ×›×¤×ª×•×¨ ×”×‘×
        document.getElementById('next-button').style.display = 'block';
        currentQuestionIndex++;
    }

    function finishPractice() {
        const main = document.querySelector('main');
        main.innerHTML = `
            <div style="text-align:center;">
                <h2>×¡×™×™××ª ××ª ×”×ª×¨×’×•×œ ×‘× ×•×©× ×–×”! ğŸ‰</h2>
                <p>×”×¦×™×•×Ÿ ×”×¡×•×¤×™ ×©×œ×š: ${score}</p>
                <p>×›×“××™ ×œ×¢×‘×•×¨ ×œ× ×•×©× ×”×‘× ×‘×ª×¤×¨×™×˜ ×œ××¢×œ×” ××• ×œ×ª×¨×’×œ ×©×•×‘.</p>
                <button class="next-btn" style="display:inline-block; width:auto;" onclick="location.reload()">×”×ª×—×œ ××—×“×©</button>
            </div>
        `;
    }

    // ××ª×—×•×œ ×¨××©×•× ×™
    window.onload = () => {
        // ×¡×™××•×Ÿ ×”×›×¤×ª×•×¨ ×”×¨××©×•×Ÿ ×›×¤×¢×™×œ
        document.querySelector('.nav-btn').classList.add('active');
        document.getElementById('explanation-area').innerHTML = studyContent['pythagoras'];
        nextQuestion();
    };

</script>

</body>
</html>
