<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×”×˜×™×¤×•×¡ ××œ ×”×¤×¡×’×” - ××©×—×§ ×–×•×’×™</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB, #f0f8ff); /* ×©××™×™× */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
        }

        #gameCanvas {
            background: linear-gradient(to top, #2e8b57 0%, #87CEEB 100%); /* ×”×¨ */
            border: 2px solid #333;
            display: block;
            margin: 0 auto;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }

        #ui {
            position: absolute;
            top: 10px;
            width: 100%;
            pointer-events: none;
            color: white;
            text-shadow: 2px 2px 4px #000;
        }

        #status {
            font-size: 24px;
            font-weight: bold;
        }

        #controls {
            margin-top: 5px;
            font-size: 16px;
        }

        /* ××¡×š × ×™×¦×—×•×Ÿ */
        #winScreen {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
        }

        .heart {
            color: #e25555;
            font-size: 100px;
            animation: heartbeat 1s infinite;
        }

        @keyframes heartbeat {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <div id="ui">
        <div id="status">×”×ª×—××§×• ××”××›×©×•×œ×™× ×•×”×’×™×¢×• ×œ×¤×¡×’×”!</div>
        <div id="controls">
            ×©×—×§×Ÿ 1 (×™××™×Ÿ): ×—×¦×™× â¬…ï¸ â¡ï¸ | ×©×—×§×Ÿ 2 (×©×××œ): ğŸ…°ï¸ / ğŸ‡©
        </div>
    </div>

    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <div id="winScreen">
        <div class="heart">â¤ï¸</div>
        <h1 style="color: #fff; text-shadow: 2px 2px 4px #000;">×”×’×¢×ª× ×œ×¤×¡×’×”!</h1>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const winScreen = document.getElementById('winScreen');
        const statusDiv = document.getElementById('status');

        // --- ×”×’×“×¨×•×ª ×ª××•× ×•×ª (×›××Ÿ ××—×œ×™×¤×™× ××ª ×”×ª××•× ×•×ª) ---
        const player1Img = new Image();
        // ×©×™× ×›××Ÿ ××ª ×”×ª××•× ×” ×©×œ ×”×‘×Ÿ/×‘×ª ×–×•×’ 1
        player1Img.src = "Screenshot_14.png";

        const player2Img = new Image();
        // ×©×™× ×›××Ÿ ××ª ×”×ª××•× ×” ×©×œ ×”×‘×Ÿ/×‘×ª ×–×•×’ 2
        player2Img.src = "Screenshot_15.png"; 

        // --- ×”×’×“×¨×•×ª ××©×—×§ ---
        let gameActive = true;
        let progress = 0; // ×”×ª×§×“××•×ª ×œ×¤×¡×’×” (0 ×¢×“ 1000)
        const goal = 1000;
        let obstacles = [];
        
        // ×”×’×“×¨×ª ×”×©×—×§× ×™×
        const players = [
            { 
                x: 200, y: 500, width: 60, height: 60, 
                color: 'blue', img: player1Img, 
                keys: { left: 'KeyA', right: 'KeyD' },
                isKissing: false 
            },
            { 
                x: 600, y: 500, width: 60, height: 60, 
                color: 'red', img: player2Img, 
                keys: { left: 'ArrowLeft', right: 'ArrowRight' },
                isKissing: false
            }
        ];

        // × ×™×”×•×œ ××§×œ×“×ª
        const keysPressed = {};
        window.addEventListener('keydown', (e) => keysPressed[e.code] = true);
        window.addEventListener('keyup', (e) => keysPressed[e.code] = false);

        // ×¤×•× ×§×¦×™×™×ª ×¢×“×›×•×Ÿ ×¨××©×™×ª
        function update() {
            if (!gameActive) {
                if (progress >= goal) animateKiss();
                return;
            }

            // ×¢×“×›×•×Ÿ ×”×ª×§×“××•×ª
            progress += 1; // ××”×™×¨×•×ª ×”×˜×™×¤×•×¡
            statusDiv.innerText = `××¨×—×§ ×œ×¤×¡×’×”: ${Math.max(0, goal - progress)} ××˜×¨×™×`;

            // ×‘×“×™×§×ª × ×™×¦×—×•×Ÿ
            if (progress >= goal) {
                endGame();
            }

            // ×ª× ×•×¢×ª ×©×—×§× ×™×
            players.forEach(p => {
                if (keysPressed[p.keys.left] && p.x > 0) p.x -= 5;
                if (keysPressed[p.keys.right] && p.x < canvas.width - p.width) p.x += 5;
            });

            // ×™×¦×™×¨×ª ××›×©×•×œ×™×
            if (Math.random() < 0.05) { // ×¡×™×›×•×™ ×©×œ 5% ×›×œ ×¤×¨×™×™×™× ×œ××›×©×•×œ ×—×“×©
                obstacles.push({
                    x: Math.random() * (canvas.width - 50),
                    y: -50,
                    width: 40 + Math.random() * 40,
                    height: 40,
                    speed: 3 + Math.random() * 3
                });
            }

            // ×¢×“×›×•×Ÿ ××›×©×•×œ×™×
            obstacles.forEach((obs, index) => {
                obs.y += obs.speed; // ×”××›×©×•×œ × ×•×¤×œ ×œ××˜×” (××“××” ×˜×™×¤×•×¡ ×œ××¢×œ×”)

                // ×‘×“×™×§×ª ×”×ª× ×’×©×•×ª
                players.forEach(p => {
                    if (isColliding(p, obs)) {
                        // ×¤×’×™×¢×”! ××¤×©×¨ ×œ×”×—×œ×™×˜ ××” ×§×•×¨×” (××™×‘×•×“ × ×§×•×“×•×ª ××• ×”×—×–×¨×” ××—×•×¨×”)
                        p.y += 20; // ×¨×¢×™×“×” ×§×˜× ×”
                        if(p.y > canvas.height) p.y = canvas.height - p.width; // ×’×‘×•×œ ×ª×—×ª×•×Ÿ
                    } else {
                        // ×”×—×–×¨×” ×”×“×¨×’×ª×™×ª ×œ××™×§×•× ××§×•×¨×™ ×× ×œ× × ×¤×’×¢×™×
                        if(p.y > 500) p.y -= 1;
                    }
                });

                // ××—×™×§×ª ××›×©×•×œ×™× ×©×™×¦××• ××”××¡×š
                if (obs.y > canvas.height) {
                    obstacles.splice(index, 1);
                }
            });
        }

        // ×‘×“×™×§×ª ×”×ª× ×’×©×•×ª ×¤×©×•×˜×” (××œ×‘× ×™×)
        function isColliding(rect1, rect2) {
            return (rect1.x < rect2.x + rect2.width &&
                    rect1.x + rect1.width > rect2.x &&
                    rect1.y < rect2.y + rect2.height &&
                    rect1.y + rect1.height > rect2.y);
        }

        // ×¦×™×•×¨ ×”××©×—×§
        function draw() {
            // × ×™×§×•×™ ××¡×š
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ×¦×™×•×¨ ××›×©×•×œ×™× (×¡×œ×¢×™×)
            ctx.fillStyle = '#555';
            obstacles.forEach(obs => {
                ctx.beginPath();
                ctx.arc(obs.x + obs.width/2, obs.y + obs.height/2, obs.width/2, 0, Math.PI*2);
                ctx.fill();
            });

            // ×¦×™×•×¨ ×©×—×§× ×™×
            players.forEach(p => {
                ctx.save();
                // ×™×¦×™×¨×ª ×¦×•×¨×” ×¢×’×•×œ×” ×œ×ª××•× ×” (Clipping mask)
                ctx.beginPath();
                ctx.arc(p.x + p.width/2, p.y + p.height/2, p.width/2, 0, Math.PI * 2, true);
                ctx.closePath();
                ctx.clip();

                // ×¦×™×•×¨ ×”×ª××•× ×”
                try {
                    ctx.drawImage(p.img, p.x, p.y, p.width, p.height);
                } catch (e) {
                    // ×’×™×‘×•×™ ×× ××™×Ÿ ×ª××•× ×” - ×¦×‘×¢ ×¨×’×™×œ
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, p.width, p.height);
                }
                ctx.restore();
                
                // ××¡×’×¨×ª ×¢×’×•×œ×”
                ctx.beginPath();
                ctx.arc(p.x + p.width/2, p.y + p.height/2, p.width/2, 0, Math.PI * 2, true);
                ctx.lineWidth = 3;
                ctx.strokeStyle = '#fff';
                ctx.stroke();
            });
        }

        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }

        // --- ×¡×™×•× ×”××©×—×§ ---
        function endGame() {
            gameActive = false;
            statusDiv.innerText = "";
            obstacles = []; // × ×§×” ××›×©×•×œ×™×
            winScreen.style.display = 'block'; // ×”×¦×’ ×œ×‘×‘×•×ª
        }

        function animateKiss() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const speed = 2;

            // ×”×–×–×ª ×©×—×§×Ÿ 1 ×œ××¨×›×–
            if (players[0].x < centerX - players[0].width) players[0].x += speed;
            if (players[0].y > centerY) players[0].y -= speed;
            else if (players[0].y < centerY) players[0].y += speed;

            // ×”×–×–×ª ×©×—×§×Ÿ 2 ×œ××¨×›×–
            if (players[1].x > centerX) players[1].x -= speed;
            if (players[1].y > centerY) players[1].y -= speed;
            else if (players[1].y < centerY) players[1].y += speed;
        }

        // ×”×ª×—×œ×ª ×”××©×—×§
        player1Img.onload = () => {}; 
        loop();

    </script>
</body>
</html>
